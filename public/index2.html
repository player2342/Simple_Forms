<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
  <style>
     
        /* /custom font/ */
@import url(https://fonts.googleapis.com/css?family=Montserrat);

/* /basic reset/ */
* {
    margin: 0;
    padding: 0;
}
html {
    height: 100%;
    background: rgb(249, 205, 72); /* fallback for old browsers */
    background: -webkit-linear-gradient(to left, #6441A5, #2a0845); /* Chrome 10-25, Safari 5.1-6 */
}
body {
    font-family: montserrat, arial, verdana;
    background: transparent;
    overflow: hidden;
}
/* /form styles/ */
#msform {
    text-align: center;
    position: relative;
    margin-top: 25%;
}
#msform fieldset {
    background:transparent;
    padding: 20px 30px;
    box-sizing: border-box;
    width: 80%;
    margin: 0 10%;
    /* /stacking fieldsets above each other/ */
    position: relative;
    max-width: 1000px;
    min-width: 794px;
    /margin: 38% auto;/
    height: 30rem;
}
/* /Hide all except first fieldset/ */
#msform fieldset:not(:first-of-type) {
    display: none;
}
/* /inputs/ */
#msform input, #msform textarea {
    padding: 15px;
    border: 1px solid #ccc;
    border-radius: 0px;
    margin-bottom: 10px;
    width: 100%;
    box-sizing: border-box;
    font-family: montserrat;
    color: #2C3E50;
    font-size: 13px;
}
#msform input:focus, #msform textarea:focus {
    -moz-box-shadow: none !important;
    -webkit-box-shadow: none !important;
    box-shadow: none !important;
    border: 1px solid;
    outline-width: 0;
    transition: All 0.5s ease-in;
    -webkit-transition: All 0.5s ease-in;
    -moz-transition: All 0.5s ease-in;
    -o-transition: All 0.5s ease-in;
}
/* /buttons/ */
#msform .action-button {
    width: 70px;
    background: black;
    font-weight: bold;
    color: white;
    border: 0 none;
    border-radius: 25px;
    cursor: pointer;
    padding: 10px 5px;
    margin: 10px 5px;
    position: relative;
    font-family: inherit;
    font-weight: 700;
    cursor: pointer;
    transition-duration: 0.1s;
    transition-property: background-color, color, border-color, opacity, box-shadow;
    transition-timing-function: ease-out;
    outline: none;
    border: 1px solid transparent;
    margin: -10px;
    box-shadow: rgb(0 0 0 / 10%) 0px 3px 12px 0px;
    /* padding: 8px 18px; */
    min-height: 15px;
    background-color: rgb(37, 37, 37);
    color: rgb(228, 228, 228);
    border-radius: 4px;
    left: -41.4%;
}


/* /headings/ */
.fs-title {
    font-size: 18px;
    text-transform: uppercase;
    color: #2C3E50;
    margin-bottom: 10px;
    letter-spacing: 2px;
    font-weight: bold;
}
.fs-subtitle {
    font-weight: normal;
    font-size: 13px;
    color: #666;
    margin-bottom: 20px;
}

 input[type=text] ,input[type=email]{
        /* /position: relative;/ */
        /* /left: -79%;/ */
        margin: 27px !important;
        display: block !important;
    width: 100% !important;
    font-family: inherit !important;
    color: rgb(0, 0, 0) !important;
    padding: 0px 0px 8px !important;
    border: none !important;
    outline: none !important;
    border-radius: 0px !important;
    appearance: none !important;
    background-image: none !important;
    background-position: initial !important;
    background-size: initial !important;
    background-repeat: initial !important;
    background-attachment: initial !important;
    background-origin: initial !important;
    background-clip: initial !important;
    transform: translateZ(0px) !important;
    font-size: 30px !important;
    -webkit-font-smoothing: antialiased !important;
    line-height: unset !important;
    -webkit-text-fill-color: black !important;
    animation: 1ms ease 0s 1 normal none running native-autofill-in !important;
    transition: background-color 1e+08s ease 0s, box-shadow 0.1s ease-out 0s !important;
    box-shadow: rgb(0 0 0 / 30%) 0px 1px !important;
    background-color: transparent !important;
    }
    label {
    display: flex;
    margin-bottom: 5px;
    font-weight: 700;
    left: 7%;
    position: absolute;
    font-size: 15px;
    top: 3%;
    }
    input[type=text],input[type=email]:focus{
        box-shadow: rgb(0 0 0) 0px 2px !important;
    }


  </style>
</head>
<body>
<!-- MultiStep Form -->
<div class="container">
<div class="row h-100" >
    <div class="col-md-6 col-md-offset-1 my-auto">
        <div id="msform">
            <!-- fieldsets -->
            <!-- first form -->
            <fieldset>
              <label class="float-right">What is your email? *</label>
                <input type="email" name="Email" placeholder="name@example.com"/>

                <input type="button" name="next" class="next action-button" value="Ok"/>
            </fieldset>
            <!-- second form -->
            <fieldset>

               <label>What is your name? *</label>
                <input type="text" name="Name" id="Name" placeholder="Your name here"/>
                <input type="button" name="next" class="next action-button" value="Ok"/>
            </fieldset>
            <!-- third form -->
            <fieldset>

               <label>Cell Number? *</label>
                <input type="text" name="Cell" placeholder="555.555.1212"/>
                <input type="hidden" id="Refer" name="Refer" value="simpleform">
                <input type="button" name="submit" class="submit action-button" value="Submit"/>
            </fieldset>
            
        </div>


    </div>
</div>
</div>
<!-- /.MultiStep Form -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
<script>

//jQuery time
var current_fs, next_fs, previous_fs; //fieldsets
var left, opacity, scale; //fieldset properties which we will animate
var animating; //flag to prevent quick multi-click glitches
$("input[name='email']").keypress(function (e) {
 var key = e.which;
 if(key == 13)  // the enter key code
  {
    
    console.log("if")
    $(".next").trigger("click");   
  }
});
$("input[name='name']").keypress(function (e) {
 var key = e.which;
 if(key == 13)  // the enter key code
  {
    
    console.log("if2")
    // $(".next").trigger("click");
    if(animating) return false;
    animating = true;

    current_fs = $(this).parent();
    next_fs = $(this).parent().next();

    //activate next step on progressbar using the index of next_fs
    $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");

    //show the next fieldset
    next_fs.show();
    //hide the current fieldset with style
    current_fs.animate({opacity: 0}, {
        step: function(now, mx) {
            //as the opacity of current_fs reduces to 0 - stored in "now"
            //1. scale current_fs down to 80%
            scale = 1 - (1 - now) * 0.2;
            //2. bring next_fs from the right(50%)
            left = (now * 100)+"%";
            //3. increase opacity of next_fs to 1 as it moves in
            opacity = 1 - now;
            current_fs.css({
        'transform': 'scale('+scale+')',
        'position': 'absolute'
      });
            next_fs.css({'left': left, 'opacity': opacity});
        },
        duration: 800,
        complete: function(){
            current_fs.hide();
            animating = false;
        },
        //this comes from the custom easing plugin
        easing: 'easeInOutBack'
    });   
  }
});

$("input[name='address']").keypress(function(e){
    var key = e.which;
    if(key == 13){
            e.preventDefault(); // avoid to execute the actual submit of the form.


    }
});
    $(".next").click(function(){
    if(animating) return false;
    animating = true;

    current_fs = $(this).parent();
    next_fs = $(this).parent().next();

    //activate next step on progressbar using the index of next_fs
    $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");

    //show the next fieldset
    next_fs.show();
    //hide the current fieldset with style
    current_fs.animate({opacity: 0}, {
        step: function(now, mx) {
            //as the opacity of current_fs reduces to 0 - stored in "now"
            //1. scale current_fs down to 80%
            scale = 1 - (1 - now) * 0.2;
            //2. bring next_fs from the right(50%)
            left = (now * 100)+"%";
            //3. increase opacity of next_fs to 1 as it moves in
            opacity = 1 - now;
            current_fs.css({
        'transform': 'scale('+scale+')',
        'position': 'absolute'
      });
            next_fs.css({'left': left, 'opacity': opacity});
        },
        duration: 800,
        complete: function(){
            current_fs.hide();
            animating = false;
        },
        //this comes from the custom easing plugin
        easing: 'easeInOutBack'
    });
});

$(".submit").click(function(e) {

    e.preventDefault(); // avoid to execute the actual submit of the form.

var form = {
    Name:$('input[name="Name"]').val(),
    Email: $('input[name="Email"]').val(),
    Cell:$('input[name="Cell"]').val(),
    Refer:$('input[name="Refer"]').val()
};

console.log(form);
var url = "https://post-to-airtable.vercel.app/api" // url of the Flask API

$.ajax({
       type: "POST",
       url: url,
       data: form,
       dataType:'json',
       encode:true,
       success: function(data)
       {
           console.log("API response", data); // show response from the flask API.
           $('#form').trigger("reset");
           alert("Data sent with success !")
       },
       error: function(err)
       {
           console.log("API response", err); // show error from the flask API.
           alert("API error, please try again !")
       }
     });

});

  </script>
</body>
</html>
